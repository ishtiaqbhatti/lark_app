import{r as d,X as y,l as j,av as _,ah as O,aj as e,aA as D,aB as M,aC as C,ak as E,am as R,an as o,as as p,ad as F,R as L,au as S,aL as V}from"./index-igZMX4Bp.js";import{u as K}from"./useClient-BASY--XD.js";import{F as B}from"./FunnelChart-BchXrdp8.js";import{R as N,a as q,b as G}from"./ExperimentOutlined-BLDMtwXn.js";import{R as W}from"./CheckCircleOutlined-DkLkWzh1.js";import{F as f}from"./Table-CAAunq6x.js";import{S as P}from"./index-RK4UnpeA.js";import{f as k}from"./format-Dc2cUM71.js";import"./Pagination-ZF9HoXKE.js";import"./en-US-ZGrySqFg.js";var Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},U=function(a,n){return d.createElement(y,j({},a,{ref:n,icon:Q}))},A=d.forwardRef(U),X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 161H699.2c-49.1 0-97.1 14.1-138.4 40.7L512 233l-48.8-31.3A255.2 255.2 0 00324.8 161H96c-17.7 0-32 14.3-32 32v568c0 17.7 14.3 32 32 32h228.8c49.1 0 97.1 14.1 138.4 40.7l44.4 28.6c1.3.8 2.8 1.3 4.3 1.3s3-.4 4.3-1.3l44.4-28.6C602 807.1 650.1 793 699.2 793H928c17.7 0 32-14.3 32-32V193c0-17.7-14.3-32-32-32zM324.8 721H136V233h188.8c35.4 0 69.8 10.1 99.5 29.2l48.8 31.3 6.9 4.5v462c-47.6-25.6-100.8-39-155.2-39zm563.2 0H699.2c-54.4 0-107.6 13.4-155.2 39V298l6.9-4.5 48.8-31.3c29.7-19.1 64.1-29.2 99.5-29.2H888v488zM396.9 361H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm223.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0-4.1-3.2-7.5-7.1-7.5H627.1c-3.9 0-7.1 3.4-7.1 7.5zM396.9 501H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5zm416 0H627.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c.1-4.1-3.1-7.5-7-7.5z"}}]},name:"read",theme:"outlined"},Y=function(a,n){return d.createElement(y,j({},a,{ref:n,icon:X}))},J=d.forwardRef(Y),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},ee=function(a,n){return d.createElement(y,j({},a,{ref:n,icon:Z}))},te=d.forwardRef(ee);const{Content:ae}=C,{Title:ie,Text:re,Link:l}=E,u=({icon:r,title:a,value:n,prefix:m,precision:h=0})=>e.jsx(p,{children:e.jsx(P,{title:a,value:n,precision:h,prefix:r?L.createElement(r,{style:{marginRight:8}}):m})}),he=()=>{var v,w;const{clientId:r}=K(),a=_(),{data:n,isLoading:m,isError:h,error:z}=O(["dashboardData",r],()=>V(r),{enabled:!!r});if(m)return e.jsx(D,{tip:"Loading dashboard...",style:{display:"block",marginTop:"50px"}});if(h)return e.jsx(M,{message:"Error",description:z.message,type:"error",showIcon:!0});const{kpis:x,funnelData:g,actionItems:s,recent_items:$}=n,I=[{title:"Keyword",dataIndex:"keyword",key:"keyword",render:(t,i)=>e.jsx(l,{onClick:()=>a(`/opportunities/${i.id}`),children:t})},{title:"Score",dataIndex:"strategic_score",key:"strategic_score",render:t=>e.jsx(S,{color:"blue",children:typeof t=="number"?t.toFixed(1):"N/A"})},{title:"Updated",dataIndex:"updated_at",key:"updated_at",render:t=>t?k(new Date(t),"yyyy-MM-dd"):"N/A"},{title:"Action",key:"action",render:(t,i)=>e.jsxs(l,{onClick:()=>a(`/opportunities/${i.id}`),children:["Review ",e.jsx(A,{})]})}],b=[{title:"Keyword",dataIndex:"keyword",key:"keyword",render:(t,i)=>e.jsx(l,{onClick:()=>a(`/opportunities/${i.id}`),children:t})},{title:"Error",dataIndex:"error_message",key:"error_message",render:t=>e.jsx(re,{type:"danger",ellipsis:{tooltip:t},children:t||"No details"})},{title:"Action",key:"action",render:(t,i)=>e.jsxs(l,{onClick:()=>a(`/opportunities/${i.id}`),children:["Details ",e.jsx(A,{})]})}],H=[{title:"Keyword",dataIndex:"keyword",key:"keyword",render:(t,i)=>e.jsx(l,{onClick:()=>a(`/opportunities/${i.id}`),children:t})},{title:"Generated On",dataIndex:"date_processed",key:"date_processed",render:t=>t?k(new Date(t),"yyyy-MM-dd HH:mm"):"N/A"},{title:"Action",key:"action",render:(t,i)=>e.jsxs(l,{onClick:()=>a(`/opportunities/${i.id}?tab=Article`),children:["View Article ",e.jsx(J,{})]})}],c=t=>{var i;return((i=g==null?void 0:g.find(T=>T.stage===t))==null?void 0:i.count)||0};return e.jsx(C,{children:e.jsxs(ae,{style:{padding:"24px"},children:[e.jsxs(ie,{level:2,children:["Dashboard for ",r]}),e.jsxs(R,{gutter:[24,24],style:{marginBottom:"24px"},children:[e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(u,{icon:N,title:"Total Opportunities",value:x.totalOpportunities})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(u,{icon:W,title:"Content Generated",value:x.contentGenerated})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(u,{icon:q,title:"Est. Monthly Traffic Value",value:x.totalTrafficValue,prefix:"$",precision:2})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(u,{icon:G,title:"Total API Cost",value:x.totalApiCost,prefix:"$",precision:2})})]}),e.jsxs(R,{gutter:[24,24],children:[e.jsx(o,{xs:24,lg:16,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[((v=s==null?void 0:s.awaitingApproval)==null?void 0:v.length)>0&&e.jsx(p,{title:e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{marginRight:8}})," Awaiting Your Approval"]}),children:e.jsx(f,{dataSource:s.awaitingApproval,columns:I,rowKey:"id",pagination:{pageSize:5},size:"small"})}),((w=s==null?void 0:s.failed)==null?void 0:w.length)>0&&e.jsx(p,{title:e.jsxs(e.Fragment,{children:[e.jsx(te,{style:{marginRight:8}})," Failed Workflows"]}),children:e.jsx(f,{dataSource:s.failed,columns:b,rowKey:"id",pagination:{pageSize:5},size:"small"})})]})}),e.jsx(o,{xs:24,lg:8,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsx(p,{title:"Recent Activity",children:e.jsx(f,{dataSource:$,columns:H,rowKey:"id",pagination:{pageSize:10},size:"small",locale:{emptyText:"No recent activity"}})}),e.jsx(p,{title:"Content Pipeline Funnel",children:e.jsx(B,{totalRaw:c("Total"),unique:c("Validated"),qualified:c("Analyzed"),disqualified:c("Disqualified"),addedToDB:c("Generated")})})]})})]})]})})};export{he as default};
