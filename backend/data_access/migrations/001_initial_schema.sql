
-- data_access/migrations/001_initial_schema.sql
-- This script sets up the initial schema for existing tables.
-- It should only be run if the tables do not exist.
-- The database_manager already creates them, so this is mainly for tracking.

-- CREATE TABLE IF NOT EXISTS opportunities (
--     id INTEGER PRIMARY KEY AUTOINCREMENT,
--     keyword TEXT NOT NULL,
--     status TEXT NOT NULL DEFAULT 'pending',
--     client_id TEXT NOT NULL DEFAULT 'default',
--     date_added TEXT NOT NULL,
--     date_processed TEXT,
--     full_data TEXT NOT NULL,
--     blueprint_data TEXT,
--     ai_content_json TEXT,
--     ai_content_model TEXT,
--     featured_image_url TEXT,
--     featured_image_local_path TEXT,
--     in_article_images_data TEXT,
--     social_media_posts_json TEXT,
--     last_workflow_step TEXT,
--     error_message TEXT,
--     wordpress_payload_json TEXT,
--     final_package_json TEXT,
--     UNIQUE(keyword, client_id)
-- );

-- CREATE TABLE IF NOT EXISTS clients (
--     client_id TEXT PRIMARY KEY,
--     client_name TEXT NOT NULL,
--     date_created TEXT NOT NULL
-- );

-- CREATE TABLE IF NOT EXISTS client_settings (
--     client_id TEXT PRIMARY KEY,
--     openai_api_key TEXT,
--     pexels_api_key TEXT,
--     location_code INTEGER,
--     language_code TEXT,
--     target_domain TEXT,
--     device TEXT,
--     os TEXT,
--     informational_score REAL,
--     commercial_score REAL,
--     transactional_score REAL,
--     navigational_score REAL,
--     question_keyword_bonus REAL,
--     ease_of_ranking_weight INTEGER,
--     traffic_potential_weight INTEGER,
--     commercial_intent_weight INTEGER,
--     growth_trend_weight INTEGER,
--     serp_features_weight INTEGER,
--     serp_freshness_weight INTEGER,
--     serp_volatility_weight INTEGER,
--     competitor_weakness_weight INTEGER,
--     max_cpc_for_scoring REAL,
--     max_sv_for_scoring INTEGER,
--     max_domain_rank_for_scoring INTEGER,
--     max_referring_domains_for_scoring INTEGER,
--     max_avg_referring_domains_filter INTEGER,
--     featured_snippet_bonus REAL,
--     ai_overview_bonus REAL,
--     serp_freshness_bonus_max REAL,
--     serp_freshness_old_threshold_days INTEGER,
--     serp_volatility_stable_threshold_days INTEGER,
--     enforce_intent_filter INTEGER,
--     allowed_intents TEXT,
--     require_question_keywords INTEGER,
--     negative_keywords TEXT,
--     min_monthly_trend_percentage REAL,
--     min_competitor_word_count INTEGER,
--     max_competitor_technical_warnings INTEGER,
--     competitor_blacklist_domains TEXT,
--     ugc_and_parasite_domains TEXT,
--     num_competitors_to_analyze INTEGER,
--     num_common_headings INTEGER,
--     num_unique_angles INTEGER,
--     max_initial_serp_urls_to_analyze INTEGER,
--     calculate_rectangles INTEGER,
--     people_also_ask_click_depth INTEGER,
--     min_search_volume INTEGER,
--     max_keyword_difficulty INTEGER,
--     ai_content_model TEXT,
--     num_in_article_images INTEGER,
--     use_pexels_first INTEGER,
--     cleanup_local_images INTEGER,
--     onpage_enable_javascript INTEGER,
--     onpage_load_resources INTEGER,
--     onpage_disable_cookie_popup INTEGER,
--     onpage_return_despite_timeout INTEGER,
--     onpage_enable_browser_rendering INTEGER,
--     onpage_store_raw_html INTEGER,
--     onpage_validate_micromarkup INTEGER,
--     onpage_custom_user_agent TEXT,
--     onpage_max_domains_per_request INTEGER,
--     onpage_max_tasks_per_request INTEGER,
--     platforms TEXT,
--     custom_prompt_template TEXT,
--     wordpress_url TEXT,
--     wordpress_user TEXT,
--     wordpress_app_password TEXT,
--     wordpress_seo_plugin TEXT,
--     default_wordpress_categories TEXT,
--     default_wordpress_tags TEXT,
--     enable_automated_internal_linking INTEGER,
--     db_type TEXT,
--     max_words_for_ai_analysis INTEGER,
--     ai_generation_temperature REAL,
--     recommended_word_count_multiplier REAL,
--     max_avg_lcp_time INTEGER,
--     prohibited_intents TEXT,
--     last_updated TEXT NOT NULL,
--     FOREIGN KEY (client_id) REFERENCES clients (client_id)
-- );

-- CREATE TABLE IF NOT EXISTS discovery_runs (
--     id INTEGER PRIMARY KEY AUTOINCREMENT,
--     client_id TEXT NOT NULL,
--     start_time TEXT NOT NULL,
--     end_time TEXT,
--     status TEXT NOT NULL,
--     parameters TEXT,
--     results_summary TEXT,
--     log_file_path TEXT,
--     error_message TEXT,
--     FOREIGN KEY (client_id) REFERENCES clients (client_id)
-- );

-- These are initially created by `database_manager.py` before migrations start.
-- This file exists for migration tracking purposes.
